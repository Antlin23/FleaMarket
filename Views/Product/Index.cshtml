@using FleaMarket.Models;
@using FleaMarket.Models.ViewModels;
@using FleaMarket.Services;
@inject MarketService marketService

@{
    var markets = await marketService.GetAllAsync();

    ViewData["Title"] = "Marknader";
}

<div class="home-container mt-5">
    <div>
        <h2 class="mb-3">Välj en marknad</h2>

        @foreach(var market in markets)
        {
            <a asp-controller="Product" asp-action="Market" asp-route-marketName="@market.MarketTitle">@market.MarketTitle</a>
        }
    </div>
</div>

<div class="container mt-5">
    <h2 class="mb-5">Aktiva marknader just nu</h2>

    @foreach (var market in markets)
    {
        <div class="bg-light p-3 my-2">
            <h3><a asp-controller="Product" asp-action="Market" asp-route-marketName="@market.MarketTitle">@market.MarketTitle</a></h3>
            @if (market.TimeOpen != null)
            {
                <p>@market.TimeOpen</p>
            }
            @if (market.marketDescription != null)
            {
                <p>@market.marketDescription</p>
            }
            <p><b>Adress:</b>@market.City @market.Address</p>
            @if (market.MarketLink != null)
            {
                <a href="@market.MarketLink" target="_blank">Mer info <i class="fa-solid fa-arrow-up-right-from-square"></i></a>
            }
        </div>
    }
</div>



